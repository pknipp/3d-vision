import React from 'react';
import { Redirect } from 'react-router-dom';
import { connect } from 'react-redux';
//import { Button } from '@material-ui/core';
import Class from "./Class";

class MyClassList extends React.Component {
  render() {
    const props = this.props;
    let classes = Object.keys(props.classes).map(classId => props.classes[classId]);
    const myClasses = classes.filter(course => course.subscribed);
    return (!props.user) ? <Redirect to="/login" /> : (
      (!myClasses) ? <h3>Nothing is in your library yet.</h3> : (
        <ul>
          {myClasses.map(course => <Class {...course} key={course.id} />)}
        </ul>
      )
    )
  }
}

const msp = state => ({ user: state.authentication, classes: state.classes });
//const mdp = dispatch=>({ fetchSubscriptions: () => dispatch(fetchSubscriptions())})
export default connect(msp)(MyClassList);
